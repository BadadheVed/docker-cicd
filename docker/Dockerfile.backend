FROM oven/bun:1

WORKDIR /home


COPY package.json bun.lock turbo.json ./


COPY packages ./packages
COPY apps/backend ./apps/backend


RUN bun install


RUN bun run db:generate   

WORKDIR /home/apps/backend

EXPOSE 5000


CMD ["sh", "-c", "cd ../.. && bun db:migrate && cd apps/backend && bun run index.ts"]
