FROM oven/bun:1 AS base

WORKDIR /apps

COPY package.json bun.lock turbo.json ./
COPY packages ./packages
COPY apps/backend ./apps/backend

RUN bun install

WORKDIR /apps/backend
RUN bun run db:generate

EXPOSE 5000
CMD ["bun", "run", "index.ts"]
